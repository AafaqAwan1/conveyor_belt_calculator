<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conveyor Belt Design Calculator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Anime.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        /* Custom Animations */
        @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes slideDown {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-100vh); }
        }

        .fade-in-scale {
            animation: fadeInScale 0.5s ease-in-out forwards;
        }

        .slide-down {
            animation: slideDown 0.3s ease-in-out forwards;
        }

        .slide-up {
            animation: slideUp 0.5s ease-in-out forwards;
        }

        details summary {
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        details summary:hover {
            background-color: #e5e7eb; /* Tailwind gray-200 */
        }

        .result-box {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .result-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }

        html {
            scroll-behavior: smooth;
        }

        :root {
            --main-title-font-size: 5rem;
            --subtitle-font-size: 2.5rem;
            --text-color: white;
            --background-color: #003087;
            --animation-duration: 1.5s;
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }

        .title-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--background-color);
            z-index: 1000;
            transition: transform 0.8s ease-in-out;
        }

        .title-page.hidden {
            transform: translateY(-100%);
        }

        .title-container {
            text-align: center;
        }

        .title, .subtitle {
            color: var(--text-color);
            display: flex;
            justify-content: center;
            margin: 0;
        }

        .title span, .subtitle span {
            display: inline-block;
            opacity: 1;
            transform: translateX(0);
        }

        .title {
            font-size: var(--main-title-font-size);
            font-weight: bold;
        }

        .subtitle {
            font-size: var(--subtitle-font-size);
        }

        @keyframes slideInFromLeft {
            0% { transform: translateX(-100vw); opacity: 0; }
            50% { opacity: 0.5; }
            100% { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInFromRight {
            0% { transform: translateX(100vw); opacity: 0; }
            50% { opacity: 0.5; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .title span.from-left, .subtitle span.from-left {
            animation: slideInFromLeft var(--animation-duration) ease-in-out forwards;
        }

        .title span.from-right, .subtitle span.from-right {
            animation: slideInFromRight var(--animation-duration) ease-in-out forwards;
        }

        .calculator-page {
            display: none;
            min-height: 100vh;
            background: linear-gradient(to bottom right, #f3f4f6, #d1d5db);
            padding: 24px;
            flex-direction: column;
        }

        .calculator-page.visible {
            display: flex;
        }

        input::placeholder {
            color: rgba(107, 114, 128, 0.5);
            opacity: 1;
        }

        select option[disabled][selected] {
            color: rgba(107, 114, 128, 0.5);
        }

        select {
            color: #1f2937;
        }

        select:invalid {
            color: rgba(107, 114, 128, 0.5);
        }

        input, select {
            background-color: rgba(255, 255, 255, 0.7);
            transition: background-color 0.3s ease;
        }

        input:focus, select:focus {
            background-color: rgba(255, 255, 255, 0.9);
        }

        /* Animated Button Styles for Title Page (Continue Button) */
        .continue-button-container {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            height: 100px;
        }

        .continue-button {
            background: linear-gradient(to right, #00B4DB, #0083B0);
            height: 100px;
            width: 250px;
            text-align: center;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 0;
            right: 0;
            margin: 0 auto;
            cursor: pointer;
            border-radius: 8px;
        }

        .continue-text {
            font: bold 1.5rem/1 poppins, Arial, sans-serif;
            color: #E0F7FA;
            position: absolute;
            top: 50%;
            transform: translateY(-52%);
            left: 0;
            right: 0;
        }

        .continue-progress-bar {
            position: absolute;
            height: 12px;
            width: 0;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: #00F5A0;
            transition: width 2s ease;
        }

        .continue-svg {
            width: 36px;
            position: absolute;
            top: 50%;
            transform: translateY(-50%) translateX(-50%);
            left: 50%;
            right: 0;
        }

        .continue-check {
            fill: none;
            stroke: #003087;
            stroke-width: 4;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Animated Button Styles for Calculator Page (Calculate Design Button) */
        .calculate-button-wrapper {
            margin: 40px auto;
            text-align: center;
            position: relative;
            width: 200px;
            height: 80px;
        }

        .calc-button {
            background: linear-gradient(to right, #3B82F6, #2563EB);
            height: 80px;
            width: 200px;
            text-align: center;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 0;
            right: 0;
            margin: 0 auto;
            cursor: pointer;
            border-radius: 8px;
        }

        .calc-text {
            font: bold 1.25rem/1 poppins, Arial, sans-serif;
            color: #FFFFFF;
            position: absolute;
            top: 50%;
            transform: translateY(-52%);
            left: 0;
            right: 0;
        }

        .calc-progress-bar {
            position: absolute;
            height: 10px;
            width: 0;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: #34D399;
        }

        .calc-svg {
            width: 30px;
            position: absolute;
            top: 50%;
            transform: translateY(-50%) translateX(-50%);
            left: 50%;
            right: 0;
        }

        .calc-check {
            fill: none;
            stroke: #1f2937;
            stroke-width: 4;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Animation Container for Calculate Button */
        .animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
    </style>
</head>
<body>
    <!-- Animated Title Page -->
    <div class="title-page" id="titlePage">
        <div class="title-container">
            <h1 class="title" id="mainTitle"></h1>
            <h2 class="subtitle" id="subTitle"></h2>
        </div>
        <!-- Animated Continue Button -->
        <div class="continue-button-container">
            <div class="continue-button">
                <div class="continue-text">Continue</div>
            </div>
            <div class="continue-progress-bar"></div>
            <svg class="continue-svg" x="0px" y="0px" viewBox="0 0 25 30" style="enable-background:new 0 0 25 30;">
                <path class="continue-check" d="M2,19.2C5.9,23.6,9.4,28,9.4,28L23,2" />
            </svg>
        </div>
    </div>

    <!-- Calculator Page -->
    <div class="calculator-page" id="calculatorPage">
        <div class="container max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl p-8">
            <h1 class="text-4xl font-bold text-center text-gray-800 mb-8">Conveyor Belt Design Calculator</h1>

            <!-- Input Form -->
            <div class="space-y-4" id="inputForm">
                <!-- Material Properties -->
                <details open class="bg-gray-50 rounded-lg p-4 slide-down">
                    <summary class="text-lg font-semibold text-gray-700 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10m0 0l-5 5m5-5l-5-5"></path>
                        </svg>
                        Material Properties
                    </summary>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label for="materialType" class="block text-sm font-medium text-gray-600" title="Select the material type">Material Name</label>
                            <select id="materialType" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="" disabled selected>Select material name</option>
                                <option value="coal">Coal</option>
                                <option value="gypsum">Gypsum</option>
                                <option value="rock_salt">Rock Salt</option>
                                <option value="limestone">Limestone</option>
                                <option value="copper_ore">Copper Ore</option>
                                <option value="sand">Sand</option>
                                <option value="gravel">Gravel</option>
                                <option value="clay">Clay</option>
                                <option value="silt">Silt</option>
                                <option value="iron_ore">Iron Ore</option>
                                <option value="bauxite">Bauxite</option>
                                <option value="phosphate_rock">Phosphate Rock</option>
                                <option value="gold_ore">Gold Ore</option>
                                <option value="silver_ore">Silver Ore</option>
                                <option value="nickel_ore">Nickel Ore</option>
                                <option value="zinc_ore">Zinc Ore</option>
                                <option value="lead_ore">Lead Ore</option>
                                <option value="manganese_ore">Manganese Ore</option>
                                <option value="cement">Cement</option>
                                <option value="aggregate">Aggregate</option>
                                <option value="potash">Potash</option>
                                <option value="sulfur">Sulfur</option>
                                <option value="quartz">Quartz</option>
                                <option value="shale">Shale</option>
                                <option value="slag">Slag</option>
                            </select>
                        </div>
                        <div>
                            <label for="materialDensity" class="block text-sm font-medium text-gray-600" title="Bulk density of the material">Bulk Density</label>
                            <div class="flex mt-1">
                                <input type="number" id="materialDensity" step="any" placeholder="Enter bulk density" class="w-full p-2 border border-gray-300 rounded-l-md focus:ring-2 focus:ring-blue-500">
                                <select id="materialDensityUnit" class="p-2 border border-l-0 border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500">
                                    <option value="lb/ft3">lb/ft³</option>
                                    <option value="kg/m3">kg/m³</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="capacity" class="block text-sm font-medium text-gray-600" title="Enter the conveyor capacity">Capacity</label>
                            <div class="flex mt-1">
                                <input type="number" id="capacity" step="any" placeholder="Enter capacity" class="w-full p-2 border border-gray-300 rounded-l-md focus:ring-2 focus:ring-blue-500">
                                <select id="capacityUnit" class="p-2 border border-l-0 border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500">
                                    <option value="tph">tph</option>
                                    <option value="kg/s">kg/s</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Conveyor Properties -->
                <details open class="bg-gray-50 rounded-lg p-4 slide-down">
                    <summary class="text-lg font-semibold text-gray-700 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5h6m-3 0v14m-6-7h12"></path>
                        </svg>
                        Conveyor Properties
                    </summary>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label for="conveyorType" class="block text-sm font-medium text-gray-600" title="Choose if the conveyor is level or inclined">Conveyor Type</label>
                            <select id="conveyorType" onchange="toggleInclinationAngle()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="" disabled selected>Select conveyor type</option>
                                <option value="level">Level</option>
                                <option value="incline">Incline</option>
                            </select>
                        </div>
                        <div>
                            <label for="inclinationAngle" class="block text-sm font-medium text-gray-600" title="Angle of incline in degrees (disabled for level conveyors)">Inclination Angle (°)</label>
                            <input type="number" id="inclinationAngle" step="any" placeholder="Enter inclination angle" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="length" class="block text-sm font-medium text-gray-600" title="Length of the conveyor">Conveyor Length</label>
                            <div class="flex mt-1">
                                <input type="number" id="length" step="any" placeholder="Enter conveyor length" class="w-full p-2 border border-gray-300 rounded-l-md focus:ring-2 focus:ring-blue-500">
                                <select id="lengthUnit" class="p-2 border border-l-0 border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500">
                                    <option value="ft">ft</option>
                                    <option value="m">m</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="beltWidth" class="block text-sm font-medium text-gray-600" title="Width of the conveyor belt">Belt Width</label>
                            <div class="flex mt-1">
                                <input type="number" id="beltWidth" step="any" placeholder="Enter belt width" class="w-full p-2 border border-gray-300 rounded-l-md focus:ring-2 focus:ring-blue-500">
                                <select id="beltWidthUnit" class="p-2 border border-l-0 border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500">
                                    <option value="in">in</option>
                                    <option value="cm">cm</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="beltSpeed" class="block text-sm font-medium text-gray-600" title="Speed of the conveyor belt">Belt Speed</label>
                            <div class="flex mt-1">
                                <input type="number" id="beltSpeed" step="any" placeholder="Enter belt speed" class="w-full p-2 border border-gray-300 rounded-l-md focus:ring-2 focus:ring-blue-500">
                                <select id="beltSpeedUnit" class="p-2 border border-l-0 border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500">
                                    <option value="fpm">fpm</option>
                                    <option value="m/s">m/s</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Drive and Pulley -->
                <details open class="bg-gray-50 rounded-lg p-4 slide-down">
                    <summary class="text-lg font-semibold text-gray-700 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Drive and Pulley
                    </summary>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label for="pulleyType" class="block text-sm font-medium text-gray-600" title="Type of pulley surface">Pulley Type</label>
                            <select id="pulleyType" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="" disabled selected>Select pulley type</option>
                                <option value="lagged">Lagged</option>
                                <option value="bare">Bare</option>
                            </select>
                        </div>
                        <div>
                            <label for="arcOfContact" class="block text-sm font-medium text-gray-600" title="Angle of belt contact with the pulley in degrees">Arc of Contact (°)</label>
                            <input type="number" id="arcOfContact" step="any" placeholder="Enter arc of contact" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="driveEfficiency" class="block text-sm font-medium text-gray-600" title="Efficiency of the drive system (e.g., 90 for 90% or 0.9)">Drive Efficiency</label>
                            <input type="number" id="driveEfficiency" step="any" placeholder="Enter drive efficiency" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="pulleyRPM" class="block text-sm font-medium text-gray-600" title="Revolutions per minute of the pulley (optional)">Pulley RPM (optional)</label>
                            <input type="number" id="pulleyRPM" step="any" placeholder="Enter pulley RPM (optional)" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="takeUpType" class="block text-sm font-medium text-gray-600" title="Type of take-up mechanism">Take-Up Type</label>
                            <select id="takeUpType" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="" disabled selected>Select take-up type</option>
                                <option value="manual">Manual</option>
                                <option value="automatic">Automatic</option>
                            </select>
                        </div>
                    </div>
                </details>

                <!-- Output Units -->
                <details open class="bg-gray-50 rounded-lg p-4 slide-down">
                    <summary class="text-lg font-semibold text-gray-700 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        Output Units
                    </summary>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label for="outputTensionUnit" class="block text-sm font-medium text-gray-600" title="Unit for tension measurements">Output Tension Unit</label>
                            <select id="outputTensionUnit" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="" disabled selected>Select tension unit</option>
                                <option value="lb">lb</option>
                                <option value="N">N</option>
                            </select>
                        </div>
                        <div>
                            <label for="outputPowerUnit" class="block text-sm font-medium text-gray-600" title="Unit for power measurements">Output Power Unit</label>
                            <select id="outputPowerUnit" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="" disabled selected>Select power unit</option>
                                <option value="HP">HP</option>
                                <option value="kW">kW</option>
                            </select>
                        </div>
                    </div>
                </details>
            </div>

            <!-- Results -->
            <div id="results" class="hidden mt-8">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Results</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="resultsContent"></div>
            </div>
        </div>

        <!-- Calculate Button (Now at end of form) -->
        <div class="calculate-button-wrapper">
            <div class="calc-button">
                <div class="calc-text">Calculate Design</div>
            </div>
            <div class="calc-progress-bar"></div>
            <svg class="calc-svg" x="0px" y="0px" viewBox="0 0 25 30" style="enable-background:new 0 0 25 30;">
                <path class="calc-check" d="M2,19.2C5.9,23.6,9.4,28,9.4,28L23,2" />
            </svg>
        </div>

        <!-- Animation Container for Calculate Button -->
        <div class="animation-container" id="animationContainer">
            <div class="calc-button">
                <div class="calc-text">Calculate Design</div>
            </div>
            <div class="calc-progress-bar"></div>
            <svg class="calc-svg" x="0px" y="0px" viewBox="0 0 25 30" style="enable-background:new 0 0 25 30;">
                <path class="calc-check" d="M2,19.2C5.9,23.6,9.4,28,9.4,28L23,2" />
            </svg>
        </div>
    </div>

    <script>
        console.log("Script loaded successfully.");

        // Animation Script for Title Page
        const mainTitleText = "AAFAQ AHMED";
        const subTitleText = "Conveyor Belt Design Calculator";
        const mainTitleElement = document.getElementById("mainTitle");
        const subTitleElement = document.getElementById("subTitle");
        const titlePage = document.getElementById("titlePage");
        const calculatorPage = document.getElementById("calculatorPage");

        if (!mainTitleElement || !subTitleElement || !titlePage || !calculatorPage) {
            console.error("One or more title page elements not found in DOM.");
        } else {
            console.log("Title page elements found successfully.");
        }

        function clearText(element) {
            element.innerHTML = "";
        }

        function animateText(element, text, delayStart) {
            const chars = text.split("");
            const midPoint = Math.floor(chars.length / 2);

            chars.forEach((char, index) => {
                const span = document.createElement("span");
                span.textContent = char === " " ? "\u00A0" : char;
                element.appendChild(span);

                const directionClass = index < midPoint ? "from-left" : "from-right";
                span.classList.add(directionClass);
                span.style.animationDelay = `${delayStart + index * 0.1}s`;

                console.log(`Span ${index}: Text=${span.textContent}, Class=${span.className}, Delay=${span.style.animationDelay}`);
            });

            setTimeout(() => {
                const spans = element.querySelectorAll('span');
                spans.forEach((span, idx) => {
                    const computedStyle = window.getComputedStyle(span);
                    if (computedStyle.opacity === '0' && computedStyle.transform.includes('translateX')) {
                        console.warn(`Span ${idx} not visible after animation: Forcing visibility.`);
                        span.style.opacity = '1';
                        span.style.transform = 'translateX(0)';
                    }
                });
            }, (delayStart + chars.length * 0.1 + 1.5) * 1000);
        }

        function startAnimation() {
            console.log("Starting title animation.");
            clearText(mainTitleElement);
            clearText(subTitleElement);
            animateText(mainTitleElement, mainTitleText, 0);
            animateText(subTitleElement, subTitleText, 0.5);
        }

        try {
            startAnimation();
        } catch (error) {
            console.error("Error in startAnimation:", error);
        }

        // Continue Button Animation
        var continueTimeline = anime.timeline({
            autoplay: false
        });

        var continuePathEls = document.querySelectorAll(".continue-check");
        for (var i = 0; i < continuePathEls.length; i++) {
            var pathEl = continuePathEls[i];
            var offset = anime.setDashoffset(pathEl);
            pathEl.setAttribute("stroke-dashoffset", offset);
        }

        continueTimeline
            .add({
                targets: ".continue-text",
                duration: 1,
                opacity: "0"
            })
            .add({
                targets: ".continue-button",
                duration: 1300,
                height: 12,
                width: 350,
                backgroundColor: "#00B4DB",
                border: "0",
                borderRadius: 100
            })
            .add({
                targets: ".continue-progress-bar",
                duration: 2000,
                width: 350,
                easing: "linear",
                left: "50%",
                right: "auto"
            })
            .add({
                targets: ".continue-button",
                width: 0,
                duration: 1
            })
            .add({
                targets: ".continue-progress-bar",
                width: 100,
                height: 100,
                delay: 500,
                duration: 750,
                borderRadius: 100,
                backgroundColor: "#00F5A0",
                left: "50%",
                right: "auto"
            })
            .add({
                targets: continuePathEls,
                strokeDashoffset: [offset, 0],
                duration: 200,
                easing: "easeInOutSine"
            })
            .add({
                targets: ".title-page",
                duration: 800,
                translateY: "-100%",
                easing: "easeInOutSine",
                complete: function() {
                    calculatorPage.classList.add("visible");
                    console.log("Calculator page should now be visible.");
                }
            });

        // Calculate Button Animation
        var calculateTimeline = anime.timeline({
            autoplay: false
        });

        var calculatePathEls = document.querySelectorAll(".calc-check");
        for (var i = 0; i < calculatePathEls.length; i++) {
            var pathEl = calculatePathEls[i];
            var offset = anime.setDashoffset(pathEl);
            pathEl.setAttribute("stroke-dashoffset", offset);
        }

        calculateTimeline
            .add({
                targets: "#animationContainer .calc-text",
                duration: 1,
                opacity: "0"
            })
            .add({
                targets: "#animationContainer .calc-button",
                duration: 1300,
                height: 10,
                width: 300,
                backgroundColor: "#3B82F6",
                border: "0",
                borderRadius: 100
            })
            .add({
                targets: "#animationContainer .calc-progress-bar",
                duration: 2000,
                width: 300,
                easing: "linear"
            })
            .add({
                targets: "#animationContainer .calc-button",
                width: 0,
                duration: 1
            })
            .add({
                targets: "#animationContainer .calc-progress-bar",
                width: 80,
                height: 80,
                delay: 500,
                duration: 750,
                borderRadius: 80,
                backgroundColor: "#34D399"
            })
            .add({
                targets: calculatePathEls,
                strokeDashoffset: [offset, 0],
                duration: 200,
                easing: "easeInOutSine"
            })
            .add({
                targets: "#animationContainer",
                duration: 500,
                opacity: 0,
                complete: function() {
                    document.getElementById("animationContainer").style.display = "none";
                    calculateDesign();
                    document.getElementById("results").classList.remove("hidden");
                    // Scroll to results
                    document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
                }
            });

        $(document).ready(function() {
            console.log("DOM fully loaded, attaching event listeners.");
            $(".continue-button, .continue-text").off('click').on('click', function() {
                console.log("Continue button clicked. Playing continueTimeline.");
                try {
                    continueTimeline.play();
                    setTimeout(function() {
                        if (!calculatorPage.classList.contains("visible")) {
                            console.warn("Animation may have failed, forcing calculator page visibility.");
                            titlePage.style.transform = "translateY(-100%)";
                            calculatorPage.classList.add("visible");
                        }
                    }, 5000);
                } catch (error) {
                    console.error("Error playing continueTimeline:", error);
                    titlePage.style.transform = "translateY(-100%)";
                    calculatorPage.classList.add("visible");
                }
            });

            $(".calc-button, .calc-text").off('click').on('click', function() {
                console.log("Calculate button clicked. Playing calculateTimeline.");
                try {
                    // Hide form and show animation container
                    document.getElementById("inputForm").style.display = "none";
                    document.getElementById("animationContainer").style.display = "flex";
                    document.querySelector(".calculate-button-wrapper").style.display = "none";
                    
                    // Scroll to top for clean animation view
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // Start animation
                    calculateTimeline.play();
                } catch (error) {
                    console.error("Error playing calculateTimeline:", error);
                    calculateDesign();
                    document.getElementById("results").classList.remove("hidden");
                }
            });
        });

        // Calculator Script
        const maxBeltSpeed = {
            14: { grain: 400, coal_earth: 300, hard_ores: 300 },
            16: { grain: 500, coal_earth: 300, hard_ores: 300 },
            18: { grain: 500, coal_earth: 400, hard_ores: 350 },
            20: { grain: 600, coal_earth: 400, hard_ores: 350 },
            24: { grain: 600, coal_earth: 500, hard_ores: 450 },
            30: { grain: 700, coal_earth: 600, hard_ores: 550 },
            36: { grain: 800, coal_earth: 650, hard_ores: 600 },
            42: { grain: 800, coal_earth: 700, hard_ores: 600 },
            48: { grain: 900, coal_earth: 700, hard_ores: 650 },
            54: { grain: 1000, coal_earth: 700, hard_ores: 650 },
            60: { grain: 1000, coal_earth: 700, hard_ores: 650 },
            66: { grain: 1000, coal_earth: 800, hard_ores: 750 },
            72: { grain: 1000, coal_earth: 800, hard_ores: 750 }
        };

        const bAndQValues = {
            14: { light: { B: 1, Q: 7 }, medium: { B: 2, Q: 13 }, heavy: { B: 3, Q: 19 } },
            16: { light: { B: 2, Q: 8 }, medium: { B: 3, Q: 14 }, heavy: { B: 4, Q: 21 } },
            18: { light: { B: 3, Q: 9 }, medium: { B: 4, Q: 16 }, heavy: { B: 5, Q: 23 } },
            20: { light: { B: 4, Q: 10 }, medium: { B: 5, Q: 18 }, heavy: { B: 6, Q: 25 } },
            24: { light: { B: 5, Q: 14 }, medium: { B: 6, Q: 21 }, heavy: { B: 7, Q: 29 } },
            30: { light: { B: 6, Q: 19 }, medium: { B: 7, Q: 28 }, heavy: { B: 8, Q: 38 } },
            36: { light: { B: 7, Q: 26 }, medium: { B: 9, Q: 38 }, heavy: { B: 11, Q: 52 } },
            42: { light: { B: 9, Q: 33 }, medium: { B: 11, Q: 50 }, heavy: { B: 14, Q: 66 } },
            48: { light: { B: 12, Q: 40 }, medium: { B: 15, Q: 60 }, heavy: { B: 18, Q: 82 } },
            54: { light: { B: 14, Q: 50 }, medium: { B: 18, Q: 71 }, heavy: { B: 22, Q: 97 } },
            60: { light: { B: 17, Q: 62 }, medium: { B: 21, Q: 85 }, heavy: { B: 27, Q: 115 } },
            66: { light: { B: 20, Q: 75 }, medium: { B: 24, Q: 103 }, heavy: { B: 32, Q: 135 } },
            72: { light: { B: 22, Q: 88 }, medium: { B: 28, Q: 121 }, heavy: { B: 36, Q: 155 } }
        };

        const kValues = {
            manual: {
                bare: {
                    150: 1.20, 180: 0.97, 190: 0.91, 200: 0.85, 210: 0.80, 220: 0.75, 230: 0.72,
                    240: 0.68, 270: 0.58, 300: 0.51, 330: 0.46, 360: 0.42, 390: 0.39, 420: 0.36,
                    450: 0.33, 480: 0.31
                },
                lagged: {
                    150: 1.00, 180: 0.80, 190: 0.75, 200: 0.71, 210: 0.66, 220: 0.62, 230: 0.59,
                    240: 0.56, 270: 0.49, 300: 0.43, 330: 0.40, 360: 0.36, 390: 0.33, 420: 0.31,
                    450: 0.29, 480: 0.27
                }
            },
            automatic: {
                bare: {
                    150: 0.84, 180: 0.64, 190: 0.59, 200: 0.54, 210: 0.50, 220: 0.46, 230: 0.43,
                    240: 0.40, 270: 0.32, 300: 0.26, 330: 0.22, 360: 0.18, 390: 0.15, 420: 0.13,
                    450: 0.11, 480: 0.09
                },
                lagged: {
                    150: 0.67, 180: 0.50, 190: 0.46, 200: 0.42, 210: 0.38, 220: 0.35, 230: 0.33,
                    240: 0.30, 270: 0.24, 300: 0.19, 330: 0.16, 360: 0.13, 390: 0.11, 420: 0.09,
                    450: 0.07, 480: 0.06
                }
            }
        };

        const idlerSpacing = {
            14: { light: 5.5, medium: 5, heavy: 5, return: 10 },
            16: { light: 5.5, medium: 5, heavy: 5, return: 10 },
            18: { light: 5.5, medium: 5, heavy: 5, return: 10 },
            24: { light: 5.5, medium: 4, heavy: 3.5, return: 10 },
            30: { light: 5.5, medium: 4, heavy: 3.5, return: 10 },
            36: { light: 5, medium: 3.5, heavy: 3, return: 10 },
            42: { light: 5, medium: 3.5, heavy: 3, return: 10 },
            48: { light: 4.5, medium: 3.5, heavy: 2.5, return: 10 },
            54: { light: 4.5, medium: 3, heavy: 2.5, return: 10 },
            60: { light: 4.5, medium: 3, heavy: 2.5, return: 9 },
            66: { light: 4.5, medium: 3, heavy: 2.5, return: 9 },
            72: { light: 4.5, medium: 3, heavy: 2.5, return: 9 }
        };

        function interpolate(value, x1, x2, y1, y2) {
            return y1 + (value - x1) * (y2 - y1) / (x2 - x1);
        }

        function interpolateKValue(takeUpType, pulleyType, arc) {
            const angles = Object.keys(kValues[takeUpType][pulleyType]).map(Number).sort((a, b) => a - b);
            if (arc <= angles[0]) return kValues[takeUpType][pulleyType][angles[0]];
            if (arc >= angles[angles.length - 1]) return kValues[takeUpType][pulleyType][angles[angles.length - 1]];

            for (let i = 0; i < angles.length - 1; i++) {
                if (arc >= angles[i] && arc <= angles[i + 1]) {
                    const k1 = kValues[takeUpType][pulleyType][angles[i]];
                    const k2 = kValues[takeUpType][pulleyType][angles[i + 1]];
                    const interpolatedK = interpolate(arc, angles[i], angles[i + 1], k1, k2);
                    return interpolatedK;
                }
            }
            return 0.50;
        }

        function convertLength(value, fromUnit, toUnit) {
            const conversions = {
                'ft': { 'ft': 1, 'm': 0.3048 },
                'm': { 'ft': 3.28084, 'm': 1 }
            };
            return value * conversions[fromUnit][toUnit];
        }

        function convertLengthUnit(value, fromUnit, toUnit) {
            const conversions = {
                'in': { 'in': 1, 'cm': 2.54 },
                'cm': { 'in': 0.393701, 'cm': 1 }
            };
            return value * conversions[fromUnit][toUnit];
        }

        function convertVolumeDensity(value, fromUnit, toUnit) {
            const conversions = {
                'lb/ft3': { 'lb/ft3': 1, 'kg/m3': 16.0185 },
                'kg/m3': { 'lb/ft3': 0.062428, 'kg/m3': 1 }
            };
            return value * conversions[fromUnit][toUnit];
        }

        function convertSpeed(value, fromUnit, toUnit) {
            const conversions = {
                'fpm': { 'fpm': 1, 'm/s': 0.00508 },
                'm/s': { 'fpm': 196.85, 'm/s': 1 }
            };
            return value * conversions[fromUnit][toUnit];
        }

        function convertCapacity(value, fromUnit, toUnit) {
            const conversions = {
                'tph': { 'tph': 1, 'kg/s': (value) => (value * 1000) / 3600 },
                'kg/s': { 'tph': (value) => (value * 3600) / 1000, 'kg/s': 1 }
            };
            return typeof conversions[fromUnit][toUnit] === 'function'
                ? conversions[fromUnit][toUnit](value)
                : value * conversions[fromUnit][toUnit];
        }

        function convertTension(value, fromUnit, toUnit) {
            const conversions = {
                'lb': { 'lb': 1, 'N': 4.44822 },
                'N': { 'lb': 0.224809, 'N': 1 }
            };
            return value * conversions[fromUnit][toUnit];
        }

        function convertPower(value, fromUnit, toUnit) {
            const conversions = {
                'HP': { 'HP': 1, 'kW': 0.7457 },
                'kW': { 'HP': 1.34102, 'kW': 1 }
            };
            return value * conversions[fromUnit][toUnit];
        }

        function updateDensity() {
            const densityInput = document.getElementById('materialDensity');
            const densityUnitSelect = document.getElementById('materialDensityUnit');
            const currentDensity = parseFloat(densityInput.value);
            const fromUnit = densityUnitSelect.dataset.previousUnit || 'lb/ft3';
            const toUnit = densityUnitSelect.value;

            if (!isNaN(currentDensity) && currentDensity > 0) {
                const convertedDensity = convertVolumeDensity(currentDensity, fromUnit, toUnit);
                densityInput.value = convertedDensity.toFixed(2);
            }
            densityUnitSelect.dataset.previousUnit = toUnit;
        }

        document.getElementById('materialDensityUnit').addEventListener('change', updateDensity);

        function toggleInclinationAngle() {
            const conveyorType = document.getElementById('conveyorType').value;
            const inclinationAngleInput = document.getElementById('inclinationAngle');
            if (conveyorType === 'level') {
                inclinationAngleInput.disabled = true;
                inclinationAngleInput.value = 0;
            } else {
                inclinationAngleInput.disabled = false;
                if (!inclinationAngleInput.value || inclinationAngleInput.value === '0') {
                    inclinationAngleInput.value = 18;
                }
            }
        }

        window.onload = function() {
            console.log("Window loaded, initializing inclination angle.");
            toggleInclinationAngle();
        };

        function calculateDesign() {
            console.log("calculateDesign function called.");
            try {
                const resultsDiv = document.getElementById('results');
                const resultsContentDiv = document.getElementById('resultsContent');

                const materialType = document.getElementById('materialType').value;
                const materialDensity = parseFloat(document.getElementById('materialDensity').value);
                const materialDensityUnit = document.getElementById('materialDensityUnit').value;
                const capacity = parseFloat(document.getElementById('capacity').value);
                const capacityUnit = document.getElementById('capacityUnit').value;
                const conveyorType = document.getElementById('conveyorType').value;
                const inclinationAngle = parseFloat(document.getElementById('inclinationAngle').value) || 0;
                const length = parseFloat(document.getElementById('length').value);
                const lengthUnit = document.getElementById('lengthUnit').value;
                const beltWidth = parseFloat(document.getElementById('beltWidth').value);
                const beltWidthUnit = document.getElementById('beltWidthUnit').value;
                const beltSpeed = parseFloat(document.getElementById('beltSpeed').value);
                const beltSpeedUnit = document.getElementById('beltSpeedUnit').value;
                const pulleyType = document.getElementById('pulleyType').value;
                const arcOfContact = parseFloat(document.getElementById('arcOfContact').value);
                const driveEfficiency = parseFloat(document.getElementById('driveEfficiency').value);
                const takeUpType = document.getElementById('takeUpType').value;
                const outputTensionUnit = document.getElementById('outputTensionUnit').value;
                const outputPowerUnit = document.getElementById('outputPowerUnit').value;

                console.log("Input values retrieved:", {
                    materialType, materialDensity, capacity, conveyorType, inclinationAngle,
                    length, beltWidth, beltSpeed, pulleyType, arcOfContact, driveEfficiency, takeUpType
                });

                if (!materialType) throw new Error("Please select a Material Type.");
                if (!conveyorType) throw new Error("Please select a Conveyor Type.");
                if (!pulleyType) throw new Error("Please select a Pulley Type.");
                if (!takeUpType) throw new Error("Please select a Take-Up Type.");
                if (!outputTensionUnit) throw new Error("Please select an Output Tension Unit.");
                if (!outputPowerUnit) throw new Error("Please select an Output Power Unit.");

                if (isNaN(materialDensity) || materialDensity === null) throw new Error("Invalid Material Density: Must be a valid number.");
                if (isNaN(capacity) || capacity === null) throw new Error("Invalid Capacity: Must be a valid number.");
                if (isNaN(length) || length === null) throw new Error("Invalid Conveyor Length: Must be a valid number.");
                if (isNaN(beltWidth) || beltWidth === null) throw new Error("Invalid Belt Width: Must be a valid number.");
                if (isNaN(beltSpeed) || beltSpeed === null) throw new Error("Invalid Belt Speed: Must be a valid number.");
                if (conveyorType === 'incline' && (isNaN(inclinationAngle) || inclinationAngle === null)) throw new Error("Invalid Inclination Angle: Must be a valid number for incline conveyors.");
                if (isNaN(arcOfContact) || arcOfContact === null) throw new Error("Invalid Arc of Contact: Must be a valid number.");
                if (isNaN(driveEfficiency) || driveEfficiency === null) throw new Error("Invalid Drive Efficiency: Must be a valid number.");

                if (conveyorType === 'incline' && (inclinationAngle <= 0 || inclinationAngle > 90)) throw new Error("Inclination angle must be between 0° and 90° for incline conveyors.");
                if (beltSpeed <= 0) throw new Error("Belt speed must be positive.");
                if (materialDensity <= 0) throw new Error("Material density must be positive.");
                if (capacity <= 0) throw new Error("Capacity must be positive.");
                if (length <= 0) throw new Error("Conveyor length must be positive.");
                if (beltWidth <= 0) throw new Error("Belt width must be positive.");
                if (arcOfContact <= 0 || arcOfContact > 360) throw new Error("Arc of Contact must be between 0° and 360°.");

                let adjustedDriveEfficiency = driveEfficiency;
                if (driveEfficiency > 0 && driveEfficiency <= 1) {
                    adjustedDriveEfficiency = driveEfficiency;
                } else if (driveEfficiency > 1 && driveEfficiency <= 100) {
                    adjustedDriveEfficiency = driveEfficiency / 100;
                } else {
                    throw new Error("Drive Efficiency must be between 0 and 1 (e.g., 0.9) or 0 and 100 (e.g., 90).");
                }

                const densityInLbPerFt3 = convertVolumeDensity(materialDensity, materialDensityUnit, 'lb/ft3');
                const capacityInTph = convertCapacity(capacity, capacityUnit, 'tph');
                const lengthInFt = convertLength(length, lengthUnit, 'ft');
                const beltWidthInInches = convertLengthUnit(beltWidth, beltWidthUnit, 'in');
                const beltSpeedInFpm = convertSpeed(beltSpeed, beltSpeedUnit, 'fpm');

                const beltWidths = Object.keys(maxBeltSpeed).map(Number);
                const closestBeltWidth = beltWidths.reduce((prev, curr) =>
                    Math.abs(curr - beltWidthInInches) < Math.abs(prev - beltWidthInInches) ? curr : prev
                );

                let materialCategory;
                if (['coal', 'sand', 'gravel', 'clay', 'silt'].includes(materialType)) {
                    materialCategory = 'coal_earth';
                } else if (['gypsum', 'rock_salt', 'limestone'].includes(materialType)) {
                    materialCategory = 'grain';
                } else {
                    materialCategory = 'hard_ores';
                }

                const maxSpeed = maxBeltSpeed[closestBeltWidth][materialCategory];
                if (beltSpeedInFpm > maxSpeed) {
                    console.warn(`Warning: Belt speed (${beltSpeedInFpm} fpm) exceeds the maximum recommended speed (${maxSpeed} fpm) for a ${beltWidthInInches}-inch belt with ${materialType}.`);
                }

                let materialLoadCategory;
                if (densityInLbPerFt3 < 50) materialLoadCategory = 'light';
                else if (densityInLbPerFt3 < 100) materialLoadCategory = 'medium';
                else materialLoadCategory = 'heavy';

                const { B, Q } = bAndQValues[closestBeltWidth][materialLoadCategory];
                const K = interpolateKValue(takeUpType, pulleyType, arcOfContact);

                const Wm = capacityInTph * 2000 / (60 * beltSpeedInFpm);
                const totalEmptyFriction = 0.015 * Wm * lengthInFt;
                const loadFriction = 0.025 * Wm * lengthInFt;

                let H = 0;
                if (conveyorType === 'incline') {
                    H = lengthInFt * Math.sin(inclinationAngle * Math.PI / 180);
                }
                const Te = totalEmptyFriction + loadFriction + (Wm * H);

                const T2 = K * Te;
                const T1 = Te + T2;

                const BH = Wm * H;
                const T0 = T1 - BH;

                let takeUpTension;
                if (takeUpType === 'automatic') {
                    takeUpTension = 1.5 * T2;
                } else {
                    takeUpTension = 1.2 * T2;
                }

                const maxAppliedTension = Math.max(T1, T0, takeUpTension);

                let HP = (Te * beltSpeedInFpm) / (33000 * adjustedDriveEfficiency);
                if (outputPowerUnit === 'kW') {
                    HP = convertPower(HP, 'HP', 'kW');
                }

                const recommendedMotorHP = HP * 1.1;
                const recommendedMotorHPInOutputUnit = outputPowerUnit === 'kW' ? recommendedMotorHP : convertPower(recommendedMotorHP, 'kW', 'HP');

                const { light, medium, heavy, return: returnSpacing } = idlerSpacing[closestBeltWidth];
                const carryingIdlerSpacing = { light, medium, heavy }[materialLoadCategory];
                const returnIdlerSpacing = returnSpacing;

                const numCarryingIdlers = Math.ceil(lengthInFt / carryingIdlerSpacing);
                const numReturnIdlers = Math.ceil(lengthInFt / returnIdlerSpacing);

                let convertedTotalEmptyFriction = convertTension(totalEmptyFriction, 'lb', outputTensionUnit);
                let convertedLoadFriction = convertTension(loadFriction, 'lb', outputTensionUnit);
                let convertedTe = convertTension(Te, 'lb', outputTensionUnit);
                let convertedT2 = convertTension(T2, 'lb', outputTensionUnit);
                let convertedT1 = convertTension(T1, 'lb', outputTensionUnit);
                let convertedT0 = convertTension(T0, 'lb', outputTensionUnit);
                let convertedTakeUpTension = convertTension(takeUpTension, 'lb', outputTensionUnit);
                let convertedMaxAppliedTension = convertTension(maxAppliedTension, 'lb', outputTensionUnit);

                resultsContentDiv.innerHTML = `
                    <div class="result-box bg-blue-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-blue-700">Empty Friction Force</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-800 mt-2">${convertedTotalEmptyFriction.toFixed(0)} ${outputTensionUnit}</p>
                    </div>
                    <div class="result-box bg-green-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-green-700">Loaded Friction Force</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-800 mt-2">${convertedLoadFriction.toFixed(0)} ${outputTensionUnit}</p>
                    </div>
                    <div class="result-box bg-purple-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-purple-700">Effective Tension (Te)</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-800 mt-2">${convertedTe.toFixed(0)} ${outputTensionUnit}</p>
                    </div>
                    <div class="result-box bg-yellow-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-yellow-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-yellow-700">Minimum Slack-Side Tension</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-800 mt-2">${convertedT2.toFixed(0)} ${outputTensionUnit}</p>
                    </div>
                                        <div class="result-box bg-orange-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-orange-700">Max Applied Tension</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-800 mt-2">${convertedMaxAppliedTension.toFixed(0)} ${outputTensionUnit}</p>
                    </div>

                    <div class="result-box bg-pink-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-pink-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-pink-700">Recommended Motor Power</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-800 mt-2">${recommendedMotorHPInOutputUnit.toFixed(2)} ${outputPowerUnit}</p>
                    </div>

                    <div class="result-box bg-lime-50 p-4 rounded-lg shadow-md fade-in-scale">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-lime-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h3 class="text-lg font-semibold text-lime-700">Idler Spacing</h3>
                        </div>
                        <p class="text-lg text-gray-800 mt-2">Carrying Idler Spacing: ${carryingIdlerSpacing.toFixed(1)} ft</p>
                        <p class="text-lg text-gray-800">Return Idler Spacing: ${returnIdlerSpacing.toFixed(1)} ft</p>
                        <p class="text-lg text-gray-800">Number of Carrying Idlers: ${numCarryingIdlers}</p>
                        <p class="text-lg text-gray-800">Number of Return Idlers: ${numReturnIdlers}</p>
                    </div>
                `;
            } catch (error) {
                console.error("Error in calculateDesign function:", error);
                alert("An error occurred: " + error.message);
            }
        }
    </script>
</body>
</html>
